"use strict";function SavingCal(e,s,t,r){var a=this;e.$watch("model",function(t,r){angular.forEach(a.boolSiteFeatures,function(e,s){e.display?(e.cs.base_price=e.cs.rate,e.drupal.base_price=e.drupal.rate,e.wordpress.base_price=e.wordpress.rate,e.cs.server_base_price=e.cs.server_rate,e.drupal.server_base_price=e.drupal.server_rate,e.wordpress.server_base_price=e.wordpress.server_rate):(e.cs.base_price=0,e.drupal.base_price=0,e.wordpress.base_price=0,e.cs.server_base_price=0,e.drupal.server_base_price=0,e.wordpress.server_base_price=0)}),t.siteFeaturesCost.multilingual.display!==r.siteFeaturesCost.multilingual.display&&(t.siteFeaturesCost.multilingual.display?e.focusMultilingual():(e.lang_count="",e.model.siteFeaturesCost.multilingual.cs.base_price=0,e.model.siteFeaturesCost.multilingual.drupal.base_price=0,e.model.siteFeaturesCost.multilingual.wordpress.base_price=0,angular.element("#lang").val(""))),a.getFeaturesCost(),a.getTotalAnnualOwnershipCost(),a.getTotalCost(),t===r?(console.log("timeout................."),s(function(){a.generateGraph()},1e3)):(console.log("Without timeout................."),a.generateGraph())},!0),a.generateLaunchCostGraph=function(){angular.element("#launchCostGraph").highcharts({chart:{type:"column",style:{fontFamily:"proxima-nova,sans-serif",fontWeight:300,fontSize:"20px"}},credits:{enabled:!1},title:{text:"Launch Cost",fontWeight:300,y:50},subtitle:{enabled:!1},xAxis:{tickLength:0,categories:["$"+r("number")(Math.round(e.total_initial_cost_cs)),"$"+r("number")(Math.round(e.total_initial_cost_drupal)),"$"+r("number")(Math.round(e.total_initial_cost_wordpress))],labels:{style:{fontWeight:600,fontSize:"18px",lineHeight:1.6,color:"#41424a"}}},yAxis:{min:0,visible:!1,labels:{enabled:!0}},legend:{align:"right",x:-30,verticalAlign:"bottom",y:25,floating:!1,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",shadow:!1},tooltip:{enabled:!1,headerFormat:"<b>{point.x}</b><br/>",pointFormatter:function(){return this.series.name+": $"+Math.round(this.y)+"<br/>Total: $"+Math.round(this.stackTotal)}},plotOptions:{column:{stacking:"normal",borderWidth:0,animation:!1,dataLabels:{enabled:!1}}},navigation:{buttonOptions:{enabled:!1}},series:[{showInLegend:!1,name:"Initial Dev Cost",visible:!0,color:"#7bd5d2",data:[e.initial_dev_cost_cs,e.initial_dev_cost_drupal,e.initial_dev_cost_wordpress]},{showInLegend:!1,name:"Initial Server Cost ",visible:!0,color:"#23bab5",data:[e.initial_server_cost_cs,e.initial_server_cost_drupal,e.initial_server_cost_wordpress]}]})},a.generateAnnualTcoGraph=function(){angular.element("#annualTcoGraph").highcharts({chart:{type:"column",style:{fontFamily:"proxima-nova,sans-serif",fontWeight:300,fontSize:"20px"}},credits:{enabled:!1},title:{text:"Annual TCO",y:50},subtitle:{enabled:!1},xAxis:{tickLength:0,categories:["$"+r("number")(Math.round(e.total_annual_ownership_cost_cs)),"$"+r("number")(Math.round(e.total_annual_ownership_cost_drupal)),"$"+r("number")(Math.round(e.total_annual_ownership_cost_wordpress))],labels:{style:{fontWeight:600,fontSize:"18px",lineHeight:1.6,color:"#41424a"}}},yAxis:{min:0,visible:!1,labels:{enabled:!1}},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{enabled:!1,headerFormat:"<b>{point.x}</b><br/>",pointFormatter:function(){return this.series.name+": $"+Math.round(this.y)+"<br/>Total: $"+Math.round(this.stackTotal)}},plotOptions:{column:{stacking:"normal",borderWidth:0,animation:!1,dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white",style:{textShadow:"0 0 3px black"}}}},navigation:{buttonOptions:{enabled:!1}},series:[{showInLegend:!1,name:"Annual Lic Cost",visible:!0,color:"#f7b452",data:[e.annual_license_cost_cs,e.annual_license_cost_drupal,e.annual_license_cost_wordpress]},{showInLegend:!1,name:"Annual Dev Cost",visible:!0,color:"#f08043",data:[e.annual_dev_cost_cs,e.annual_dev_cost_drupal,e.annual_dev_cost_wordpress]},{showInLegend:!1,name:"Annual Server Cost",visible:!0,color:"#e44749",data:[e.annual_server_cost_cs,e.annual_server_cost_drupal,e.annual_server_cost_wordpress]}]})},a.generateGraph=function(){a.generateLaunchCostGraph(),a.generateAnnualTcoGraph()},e.focusMultilingual=function(){s(function(){angular.element("#lang").focus(),angular.element("#lang").css({"box-shadow":"none",outline:"none"})},100)},e.langChanged=function(s){e.lang_count=s,e.model.siteFeaturesCost.multilingual.display&&e.lang_count?(e.model.siteFeaturesCost.multilingual.cs.base_price=2*e.lang_count+1,e.model.siteFeaturesCost.multilingual.drupal.base_price=2*e.lang_count+1,e.model.siteFeaturesCost.multilingual.wordpress.base_price=2*e.lang_count+1):(e.model.siteFeaturesCost.multilingual.cs.base_price=0,e.model.siteFeaturesCost.multilingual.drupal.base_price=0,e.model.siteFeaturesCost.multilingual.wordpress.base_price=0),a.getFeaturesCost(),a.getTotalAnnualOwnershipCost(),a.getTotalCost()},a.getInitialDevCost=function(){e.sum_cost_cs=e.model.siteFeaturesCost.seo.cs.base_price+e.model.siteFeaturesCost.analytics.cs.base_price+e.model.siteFeaturesCost.responsive.cs.base_price+e.model.siteFeaturesCost.contact_us_forms.cs.base_price+e.model.siteFeaturesCost.users_and_permissions.cs.base_price+e.sum_common_cost_cs,e.initial_dev_cost_cs=(e.sum_cost_cs+e.total_weeks_cs)/52*8e4,e.sum_cost_drupal=e.model.siteFeaturesCost.seo.drupal.base_price+e.model.siteFeaturesCost.analytics.drupal.base_price+e.model.siteFeaturesCost.responsive.drupal.base_price+e.model.siteFeaturesCost.contact_us_forms.drupal.base_price+e.model.siteFeaturesCost.users_and_permissions.drupal.base_price+e.sum_common_cost_drupal,e.initial_dev_cost_drupal=(e.sum_cost_drupal+e.total_weeks_drupal)/52*16e4,e.sum_cost_wordpress=e.model.siteFeaturesCost.seo.wordpress.base_price+e.model.siteFeaturesCost.analytics.wordpress.base_price+e.model.siteFeaturesCost.responsive.wordpress.base_price+e.model.siteFeaturesCost.contact_us_forms.wordpress.base_price+e.model.siteFeaturesCost.users_and_permissions.wordpress.base_price+e.sum_common_cost_wordpress,e.initial_dev_cost_wordpress=(e.sum_cost_wordpress+e.total_weeks_wordpress)/52*16e4},a.getWeeksCount=function(){e.sum_common_cost_cs=e.model.siteFeaturesCost.animations.cs.base_price+e.model.siteFeaturesCost.search.cs.base_price+e.model.siteFeaturesCost.multilingual.cs.base_price+e.model.siteFeaturesCost.blog.cs.base_price+e.model.siteFeaturesCost.forum.cs.base_price+e.model.siteFeaturesCost.live_chat.cs.base_price+e.model.siteFeaturesCost.cdn.cs.base_price+e.model.siteFeaturesCost.eCommerce.cs.base_price+e.model.siteFeaturesCost.dynamic_content_optimization.cs.base_price+e.model.siteFeaturesCost.login_portal.cs.base_price+e.model.siteFeaturesCost.download_library.cs.base_price+e.model.siteFeaturesCost.advanced_lead_gen.cs.base_price+e.model.siteFeaturesCost.ab_testing.cs.base_price+e.model.siteFeaturesCost.roi_calculators.cs.base_price,e.sum_common_cost_drupal=e.model.siteFeaturesCost.animations.drupal.base_price+e.model.siteFeaturesCost.search.drupal.base_price+e.model.siteFeaturesCost.multilingual.drupal.base_price+e.model.siteFeaturesCost.blog.drupal.base_price+e.model.siteFeaturesCost.forum.drupal.base_price+e.model.siteFeaturesCost.live_chat.drupal.base_price+e.model.siteFeaturesCost.cdn.drupal.base_price+e.model.siteFeaturesCost.eCommerce.drupal.base_price+e.model.siteFeaturesCost.dynamic_content_optimization.drupal.base_price+e.model.siteFeaturesCost.login_portal.drupal.base_price+e.model.siteFeaturesCost.download_library.drupal.base_price+e.model.siteFeaturesCost.advanced_lead_gen.drupal.base_price+e.model.siteFeaturesCost.ab_testing.drupal.base_price+e.model.siteFeaturesCost.roi_calculators.drupal.base_price,e.sum_common_cost_wordpress=e.model.siteFeaturesCost.animations.wordpress.base_price+e.model.siteFeaturesCost.search.wordpress.base_price+e.model.siteFeaturesCost.multilingual.wordpress.base_price+e.model.siteFeaturesCost.blog.wordpress.base_price+e.model.siteFeaturesCost.forum.wordpress.base_price+e.model.siteFeaturesCost.live_chat.wordpress.base_price+e.model.siteFeaturesCost.cdn.wordpress.base_price+e.model.siteFeaturesCost.eCommerce.wordpress.base_price+e.model.siteFeaturesCost.dynamic_content_optimization.wordpress.base_price+e.model.siteFeaturesCost.login_portal.wordpress.base_price+e.model.siteFeaturesCost.download_library.wordpress.base_price+e.model.siteFeaturesCost.advanced_lead_gen.wordpress.base_price+e.model.siteFeaturesCost.ab_testing.wordpress.base_price+e.model.siteFeaturesCost.roi_calculators.wordpress.base_price,e.total_weeks_cs=1.25*(e.model.pageSize.cs.values[e.model.pageSize.currentIndex]+e.sum_common_cost_cs),e.total_weeks_drupal=1.25*(e.model.pageSize.drupal.values[e.model.pageSize.currentIndex]+e.sum_common_cost_drupal),e.total_weeks_wordpress=1.25*(e.model.pageSize.wordpress.values[e.model.pageSize.currentIndex]+e.sum_common_cost_wordpress)},a.getInitialServerCost=function(){e.initial_server_cost_cs=200*e.total_weeks_cs/4,e.initial_server_cost_drupal=300*e.total_weeks_drupal/4,e.initial_server_cost_wordpress=300*e.total_weeks_wordpress/4},a.getFeaturesCost=function(){a.getWeeksCount(),a.getInitialDevCost(),a.getInitialServerCost(),e.total_initial_cost_cs=e.initial_dev_cost_cs+e.initial_server_cost_cs,e.total_initial_cost_drupal=e.initial_dev_cost_drupal+e.initial_server_cost_drupal,e.total_initial_cost_wordpress=e.initial_dev_cost_wordpress+e.initial_server_cost_wordpress,e.perc_saving_initial_cost=(e.total_initial_cost_drupal-e.total_initial_cost_cs)/e.total_initial_cost_drupal*100,e.perc_saving_initial_cost||(e.perc_saving_initial_cost=0)},a.getAnnualLicenseCost=function(){e.annual_license_cost_cs=12*e.model.pageViews.cs.values[e.model.pageViews.currentIndex],e.annual_license_cost_drupal=12*e.model.pageViews.drupal.values[e.model.pageViews.currentIndex],e.annual_license_cost_wordpress=12*e.model.pageViews.wordpress.values[e.model.pageViews.currentIndex]},a.getAnnualDevelopmentCost=function(){e.annual_dev_cost_cs=8e4*e.model.pageSize.cs.ann_values[e.model.pageSize.currentIndex],e.annual_dev_cost_drupal=16e4*e.model.pageSize.drupal.ann_values[e.model.pageSize.currentIndex],e.annual_dev_cost_wordpress=16e4*e.model.pageSize.wordpress.ann_values[e.model.pageSize.currentIndex]},a.getAnnualServerCost=function(){e.sum_annual_server_cost_cs=e.model.siteFeaturesCost.seo.cs.server_base_price+e.model.siteFeaturesCost.analytics.cs.server_base_price+e.model.siteFeaturesCost.responsive.cs.server_base_price+e.model.siteFeaturesCost.contact_us_forms.cs.server_base_price+e.model.siteFeaturesCost.users_and_permissions.cs.server_base_price+e.model.siteFeaturesCost.animations.cs.server_base_price+e.model.siteFeaturesCost.search.cs.server_base_price+e.model.siteFeaturesCost.multilingual.cs.server_base_price+e.model.siteFeaturesCost.blog.cs.server_base_price+e.model.siteFeaturesCost.forum.cs.server_base_price+e.model.siteFeaturesCost.live_chat.cs.server_base_price+e.model.siteFeaturesCost.cdn.cs.server_base_price+e.model.siteFeaturesCost.eCommerce.cs.server_base_price+e.model.siteFeaturesCost.dynamic_content_optimization.cs.server_base_price+e.model.siteFeaturesCost.login_portal.cs.server_base_price+e.model.siteFeaturesCost.download_library.cs.server_base_price+e.model.siteFeaturesCost.advanced_lead_gen.cs.server_base_price+e.model.siteFeaturesCost.ab_testing.cs.server_base_price+e.model.siteFeaturesCost.roi_calculators.cs.server_base_price,e.annual_server_cost_cs=12*(e.model.pageViews.cs.ann_values[e.model.pageViews.currentIndex]+e.sum_annual_server_cost_cs),e.sum_annual_server_cost_drupal=e.model.siteFeaturesCost.seo.drupal.server_base_price+e.model.siteFeaturesCost.analytics.drupal.server_base_price+e.model.siteFeaturesCost.responsive.drupal.server_base_price+e.model.siteFeaturesCost.contact_us_forms.drupal.server_base_price+e.model.siteFeaturesCost.users_and_permissions.drupal.server_base_price+e.model.siteFeaturesCost.animations.drupal.server_base_price+e.model.siteFeaturesCost.search.drupal.server_base_price+e.model.siteFeaturesCost.multilingual.drupal.server_base_price+e.model.siteFeaturesCost.blog.drupal.server_base_price+e.model.siteFeaturesCost.forum.drupal.server_base_price+e.model.siteFeaturesCost.live_chat.drupal.server_base_price+e.model.siteFeaturesCost.cdn.drupal.server_base_price+e.model.siteFeaturesCost.eCommerce.drupal.server_base_price+e.model.siteFeaturesCost.dynamic_content_optimization.drupal.server_base_price+e.model.siteFeaturesCost.login_portal.drupal.server_base_price+e.model.siteFeaturesCost.download_library.drupal.server_base_price+e.model.siteFeaturesCost.advanced_lead_gen.drupal.server_base_price+e.model.siteFeaturesCost.ab_testing.drupal.server_base_price+e.model.siteFeaturesCost.roi_calculators.drupal.server_base_price,e.annual_server_cost_drupal=12*(e.model.pageViews.drupal.ann_values[e.model.pageViews.currentIndex]+e.sum_annual_server_cost_drupal),e.sum_annual_server_cost_wordpress=e.model.siteFeaturesCost.seo.wordpress.server_base_price+e.model.siteFeaturesCost.analytics.wordpress.server_base_price+e.model.siteFeaturesCost.responsive.wordpress.server_base_price+e.model.siteFeaturesCost.contact_us_forms.wordpress.server_base_price+e.model.siteFeaturesCost.users_and_permissions.wordpress.server_base_price+e.model.siteFeaturesCost.animations.wordpress.server_base_price+e.model.siteFeaturesCost.search.wordpress.server_base_price+e.model.siteFeaturesCost.multilingual.wordpress.server_base_price+e.model.siteFeaturesCost.blog.wordpress.server_base_price+e.model.siteFeaturesCost.forum.wordpress.server_base_price+e.model.siteFeaturesCost.live_chat.wordpress.server_base_price+e.model.siteFeaturesCost.cdn.wordpress.server_base_price+e.model.siteFeaturesCost.eCommerce.wordpress.server_base_price+e.model.siteFeaturesCost.dynamic_content_optimization.wordpress.server_base_price+e.model.siteFeaturesCost.login_portal.wordpress.server_base_price+e.model.siteFeaturesCost.download_library.wordpress.server_base_price+e.model.siteFeaturesCost.advanced_lead_gen.wordpress.server_base_price+e.model.siteFeaturesCost.ab_testing.wordpress.server_base_price+e.model.siteFeaturesCost.roi_calculators.wordpress.server_base_price,e.annual_server_cost_wordpress=12*(e.model.pageViews.wordpress.ann_values[e.model.pageViews.currentIndex]+e.sum_annual_server_cost_wordpress)},a.getTotalAnnualOwnershipCost=function(){a.getAnnualLicenseCost(),a.getAnnualDevelopmentCost(),a.getAnnualServerCost(),e.total_annual_ownership_cost_cs=e.annual_license_cost_cs+e.annual_dev_cost_cs+e.annual_server_cost_cs,e.total_annual_ownership_cost_drupal=e.annual_license_cost_drupal+e.annual_dev_cost_drupal+e.annual_server_cost_drupal,e.total_annual_ownership_cost_wordpress=e.annual_license_cost_wordpress+e.annual_dev_cost_wordpress+e.annual_server_cost_wordpress,e.perc_saving_annual_ownership_cost=(e.total_annual_ownership_cost_drupal-e.total_annual_ownership_cost_cs)/e.total_annual_ownership_cost_drupal*100,e.perc_saving_annual_ownership_cost||(e.perc_saving_annual_ownership_cost=0)},a.getTotalCost=function(){e.total_cost_cs=e.total_initial_cost_cs+3*e.total_annual_ownership_cost_cs,e.total_cost_drupal=e.total_initial_cost_drupal+3*e.total_annual_ownership_cost_drupal,e.total_cost_wordpress=e.total_initial_cost_wordpress+3*e.total_annual_ownership_cost_wordpress,e.total_cost_drupal<e.total_cost_wordpress?e.savingCost=Math.round(e.total_cost_drupal-e.total_cost_cs):e.savingCost=Math.round(e.total_cost_wordpress-e.total_cost_cs)},a.setDefaultValues=function(){e.model.pageSize.currentIndex=1,e.model.pageViews.currentIndex=3,e.initial_dev_cost_cs=0,e.initial_dev_cost_drupal=0,e.initial_dev_cost_wordpress=0},e.checkTarget=function(e){return e?'target="_blank"':""},e.initializeCal=function(s){e.savingCalCms=angular.copy(window.savingCalCms),e.model=angular.copy(t.getSavingCalModel()),a.boolSiteFeatures=_.toArray(_.omit(e.model.siteFeaturesCost,["multilingual"])),e.savingCalSiteFeatures=_.chunk(a.boolSiteFeatures,2),a.setDefaultValues()},a.init=void e.initializeCal()}angular.module("savingCalculator").controller("savingCal",SavingCal),SavingCal.$inject=["$scope","$timeout","savingCalModel","$filter"];